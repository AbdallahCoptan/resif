
        Time-stamp: <Thu 2017-01-12 14:19 svarrette>

--------------------------------------------
# Deployment Versioning and Releasing Policy

A [semantic versioning](http://semver.org/) approach is enforced for all RESIF deployment, the current version being stored on the `<configdir>/VERSION` file.
In this context, a version number have the following format:

      <major>.<minor>.<patch>

where:

* `< major >` corresponds to the major version number
* `< minor >` corresponds to the minor version number
* `< patch >` corresponds to the patching version number

Example: `0.1.5`

--------------------

**`/!\ IMPORTANT`**:  this version is proper to your current RESIF deployment and configuration (thus refers to `<configdir>/VERSION` -- see [`variables.md`](variables.md)) and is obtained by `resif version`. In particular, it __DIFFERS__ from the version of the resif command, as obtained using `resif --version`.

Also, NEVER MAKE ANY MANUAL CHANGES TO `<configdir>/VERSION`, use the `resif bump:*` and `resif release` commands for that -- see [`cli/index.md`](cli/index.md).

--------------------

### Releasing policy

* MAJOR version increments when incompatible changes applies.
  This includes for instance
     - any major change in the [UL HPC platform](http://hpc.uni.lu)  that render the provided software useless or with limited performance (_ex:_ introduction of a new interconnect technology / topology etc.)
     - a new major release of [Easybuild](http://hpcugent.github.io/easybuild/)

* MINOR version increments when functionalities are provided in a backwards-compatible manner.
This includes for instance:
     - a new minor release of [Easybuild](http://hpcugent.github.io/easybuild/)
	 - adding a new software to the `default` software set (implying the testing framework reported on [CDash](http://cdash.uni.lu/index.php?project=UL-HPC-Testing))
     - adding a new software set

* PATCH version increments when backwards-compatible bug fixes / changes are provided.
This includes for instance:
     - adding a new missing software to the `default` software set

For the sake of simplicity, **only the Major and Minor release lead to a new root directory (named v.X.Y) in the environment modules directory layout**.
In particular, any patch release `X.Y.Z` is applied into the existing `X.Y` environment modules hierarchy.
For more details, see the `<release>` and `<releasedir>` variable --  see [`variables.md`](variables.md)).


### RESIF Workflow and Directory Layout

When you use Easybuild through the `eb` command, it installs by default the software and modules under [`<eb_installpath>`](http://easybuild.readthedocs.io/en/latest/Configuration.html#installpath), _i.e._ `<eb_prefix>` by default (see [`variables.md`](variables.md)).


| Install Path | with Easybuild            | with RESIF                                                                                     |
|--------------|---------------------------|------------------------------------------------------------------------------------------------|
| Software     | `<eb_prefix>/software`    | `<installdir>/software` (_i.e._ `<datadir>/[<branch>/]v<major>.<minor>-<date>/software`)       |
| Modules      | `<eb_prefix>/modules/all` | `<installdir>/modules/all` (_i.e._ `<datadir>/[<branch>/]v<major>.<minor>-<date>/modules/all`) |


Examples (using __default__ settings):

* __Software__ install path:
    - Easybuild: `~/.local/easybuild/software`
    - RESIF:     `~/.local/resif/[production/]/v0.6-20170117/software`
* __Modules__ install path:
    - Easybuild: `~/.local/easybuild/modules/all`
    - RESIF:     `~/.local/resif/[production/]/v0.6-20170117/modules/all`

To make the modules generated by EasyBuild and/or RESIF available, the `$MODULEPATH` environment variable must be updated to include the different modules install path, probably as follows:

       export MODULESPATH="${EASYBUILD_PREFIX}/modules/all:${RESIF_INSTALLDIR}/modules/all:$MODULEPATH"
